@import '../../../scss/pui-variables';

$spring-green: #1BB3A8;
$spring-brown: #17232a;
$body-bg: inherit;
$btn-default-border: #DFE5E8;
$spring-light-grey: #EEEEEE;
$btn-default-color: white;
$btn-default-bg: #607580;
$flo-shape-fill-color: #f1f1f1;
$spring-grey: #DFE5E8;

$source-color: #0096ff;
$processor-color: #80b600;
$sink-color: #f5be00;
$app-color: #ff00de;
$other-color: #777777;

.stream-editor {
  position: relative;
  .canvas-controls-container {
    top: 12px;
  }
  .flow-actions {
    position: absolute;
    display: inline-flex;
    bottom: 0px;
    z-index: 2;
    .btn {
      margin-left: 2px;
      padding-left: 10px;
      padding-right: 10px;
    }
    .dropdown {
      height: 30px;
      margin-left: 2px;
      .dropdown-value {
        display: inline-block;
        width: 36px;
      }
      .form-control {
        font-size: 14px;
        padding: 4px 8px 2px;
        height: 30px;
        cursor: pointer;
        &:hover {
          background: $gray-10;
          border-color: $navy-7;
        }
      }
      &.open {
        .form-control {
          border-color: $navy-7;
        }
      }
      .dropdown-menu {
        min-width: 85px;
        > li > a {
          padding: 2px 10px;
        }
      }
    }
    .btn {
      height: 30px;
      line-height: 28px;
      padding: 0 8px;
      font-size: 14px;
    }
    .btn-fa-transparent {
      padding: 0 8px;
      height: 30px;
      font-size: 20px;
      color: $navy-2;
      &:hover {
        background-color: $navy-11;
      }
    }
  }
  .canvas {
    border: 0 none;
  }
}

.zoom-canvas-control {
  display: none;
}

.dataflow-page-actions {
  padding: 15px 0;
  margin-left: 0px;
  margin-right: 0px;
  padding-bottom: 0;
}

.stream-editor #flow-view {
  height: 625px;
  font-family: inherit;
}

.stream-editor #sidebar-resizer {
  width: 1px;
  border-left: 12px solid white;
  border-right: 1px solid #dfe5e8;
  z-index: 1000;
  cursor: col-resize;
}

.flow-definition-container {
  border: 1px solid;
  /*border-color: $spring-green;*/
  border-radius: 2px;
  margin-top: 3px;
  /*background-color: $body-bg;*/
  font-family: monospace;
  z-index: 2;
  width: 100%;
  height: 100px;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box; /* Firefox, other Gecko */
  box-sizing: border-box; /* Opera/IE 8+ */
}

.flow-definition {
  border: 5px;
  height: 100%;
  width: 100%;
  font-size: 16px;
  resize: none;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box; /* Firefox, other Gecko */
  box-sizing: border-box; /* Opera/IE 8+ */
}

.flow-definition-container {
  border: 1px solid;
  border-color: /*$spring-green*/
    $btn-default-border;
  border-radius: 2px;
  margin-top: 3px;
  background-color: $body-bg;
  font-family: monospace;
  z-index: 2;
  width: 100%;
  height: 100px;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box; /* Firefox, other Gecko */
  box-sizing: border-box; /* Opera/IE 8+ */
  margin-bottom: 16px;
}

.flow-definition {
  border: 5px;
  height: 100%;
  width: 100%;
  font-size: 16px;
  resize: none;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box; /* Firefox, other Gecko */
  box-sizing: border-box; /* Opera/IE 8+ */
}

/* Otherwise ports, link labels, embedded shapes get outline on focus */
svg * {
  outline: none;
}

.port-shape-group {
  cursor: pointer;
}

[magnet=true]:not(.element) {
  cursor: pointer;
}

//.joint-element.highlighted circle {
//  stroke: #34302d;
//  stroke-width: 3;
//}
//
//.joint-element.highlighted path {
//  stroke: #34302d;
//  stroke-width: 3;
//}
//
//.joint-link.highlighted path {
//  stroke-width: 3;
//}

// Make transparent the circle around the link-tools (cog) icon. It'll allow shape to have a circle clicking area
.link-tools .tool-options circle {
  fill: transparent;
  stroke: transparent;
}

.link-tools .tool-options path {
  fill: black;
  stroke: black;
}

.link-tools .tool-remove circle {
  fill: #da0000;
  stroke: #da0000;
}

.link-tools .tool-remove path {
  fill: white;
  stroke: white;
}

.link-tools-container {
  stroke-width: 0;
  fill: transparent;
}

.joint-link.joint-theme-default .marker-vertex {
  fill: #70A5D9;
  stroke: $spring-brown;
  stroke-width: 1;
}

.joint-link.joint-theme-default .marker-vertex:hover {
  fill: #4C7EA5;
  stroke: $spring-brown;
  stroke-width: 2;
}

.joint-link.joint-theme-default .marker-arrowhead {
  fill: #70A5D9;
  stroke: $spring-brown;
  stroke-width: 1;
}

.joint-link.joint-theme-default .marker-arrowhead:hover {
  fill: #4C7EA5;
  stroke: $spring-brown;
  stroke-width: 2;
}

.label1 {
  font-family: inherit;
}

.dsl-editor {
  border: 1px solid;
  border-color: $btn-default-border;
}

.property-code-editor {
  height: 180px;
}

.CodeMirror-lint-tooltip {
  z-index: 2000;
}

.dataflow-main-container .canvas {
  border-color: $btn-default-border;
}

.flow-view .canvas {
  border-color: $btn-default-border;
}

#palette-container {
  background-color: $spring-light-grey;
}

.stream-editor #palette-paper-container {
  height: calc(100% - 32px);
  width: 100%;
  padding-right: 20px;
}

.palette-paper {
  background-color: white;
  border-color: $btn-default-border;
}

.palette-paper.joint-paper.joint-theme-default {
  background-color: white;
}

.flow-view .palette-filter {
  border-color: #ebf0f2;
  border-width: 0;
  .palette-filter-label {
    position: relative;
    display: block;
    margin-bottom: 0;
    &:after {
      position: absolute;
      font-family: "FontAwesome";
      content: "\f002";
      width: 20px;
      height: 24px;
      top: 0;
      right: 8px;
      font-size: 18px;
      cursor: pointer;
    }
  }
  input[type=search] {
    font-family: "Source Sans Pro", sans-serif;

    display: block;
    width: 100%;
    height: ($base-unit*4);
    padding: 4px $base-unit;
    /* The 6px vertically centers text on FF, ignored by Webkit */
    font-size: 14px;
    background-color: #fff;
    border: 0;
    border-bottom: 1px solid #c1c7ca;
    border-radius: 0;
    -webkit-appearance: none;
    box-shadow: none;
    box-sizing: border-box;
    color: $dark-2;
    padding-bottom: 12px;
    font-weight: normal;
    &::placeholder {
      color: $dark-2;
      font-weight: 600;
    }
    &:focus {
      box-shadow: none;
      border: 0;
      border-bottom: 1px solid #607580;
      outline: none;
    }
  }

}

.box {
  stroke: none;
  fill: $flo-shape-fill-color;
}

.sync-box {
  stroke: none;
  fill: $flo-shape-fill-color;
}

.validation-errors .box {
  fill: rgb(254, 227, 227);
}

.error-marker {
  display: none;
}

.validation-errors .error-marker {
  display: block;
}

.stream-module {
  .stream-label {
    fill: #AAAAAA;
    font-size: 15px;
  }
  .name-label {
    font-family: "Source Sans Pro", sans-serif;
    font-size: 14px;
    font-weight: normal;
    fill: #222;
  }
  .palette-entry-name-label {
    font-family: "Source Sans Pro", sans-serif;
    font-size: 12px;
    font-weight: normal;
    fill: #222;
  }
  .type-label {
    font-family: "Source Sans Pro", sans-serif;
    font-size: 12px;
    font-weight: normal;
    fill: white;
  }
}

.composed-task {
  .name-label {
    font-family: "Source Sans Pro", sans-serif;
    font-size: 12px;
    font-weight: normal;
    fill: #222;
  }
  .palette-entry-name-label {
    font-family: "Source Sans Pro", sans-serif;
    font-size: 12px;
    font-weight: normal;
    fill: #222;
  }
  .type-label {
    font-family: "Source Sans Pro", sans-serif;
    font-size: 12px;
    font-weight: normal;
    fill: white;
  }

  .start-outer {
    fill: rgb(27, 41, 49);
    stroke: none;
  }
  .start-inner {
    fill: rgb(27, 41, 49);
    stroke: none;
  }
  .end-inner {
    fill: rgb(27, 41, 49);
    stroke: none;
  }
  .end-outer {
    fill: white;
    stroke: rgb(27, 41, 49);
    stroke-width: 1px;
  }
}

.default-name .stream-module .name-label {
  fill: #777777;
}

.type-label-bg {
  // These SVG attributes commented out below are removed by angular prod compiler due to 'buildOptimizer' on in angular.json
  // Therefore these would need to added for each shape in Stream and ST editors.
  //rx: 8;
  //ry: 8;
  fill: black;
  stroke: none;
  fill: #da0000;
}

.source-module .type-label-bg {
  fill: $source-color;
}

.processor-module .type-label-bg {
  fill: $processor-color;
}

.sink-module .type-label-bg {
  fill: $sink-color;
}

.app-module .type-label-bg {
  fill: $app-color;
}

.other-module .type-label-bg {
  fill: $other-color;
}

.composed-task .type-label-bg {
  fill: #FF5400;
}

.destination .box {
  stroke: none;
  fill: $flo-shape-fill-color;
}

.table .flow-view {
  height: 200px;
}

.CodeMirror pre.CodeMirror-placeholder {
  color: $spring-grey;
}

.dsl-editor-page {
  height: 400px;
}

.fail-cross {
  fill: $spring-green;
  stroke: $spring-green;
}

.connection.composed-task-graph-transition {
  stroke-dasharray: 1, 5;
}

.connection.primary-output-from-app {
  stroke-dasharray: 1, 0;
}

.connection.tapped-output-from-app {
  stroke-dasharray: 5, 2;
}

.connection {
  stroke: $navy-8;
}

.marker-source {
  stroke: #AAAAAA;
  fill: #AAAAAA;
}

.marker-target {
  stroke: #AAAAAA;
  fill: #AAAAAA;
}

// Link Tools handle shows up on a link in Composed Task editor
.link-tool.composed-task .tool-options {
  display: block;
}

.link-tool.create-stream .tool-options {
  display: block;
}

.flo-port-label {
  fill: black;
}

.flo-port-label-bg {
  fill: lightblue;
  stroke: lightblue;
  stroke-width: 7px;
}

.joint-link:hover .link-channel-label {
  opacity: 1;
}

.link-channel-label {
  opacity: 0;
}

@keyframes flash-stroke-width {
  0% {
    stroke-width: 1;
  }
  50% {
    stroke-width: 4;
  }
  100% {
    stroke-width: 1;
  }
}

// Stream modules DnD shape animation
.dnd-source-feedback .stream-module .box {
  animation: flash-stroke-width 2s linear infinite;
}

.dnd-target-feedback .stream-module .box {
  animation: flash-stroke-width 2s linear infinite;
}

// Stream modules DnD shape animation
.dnd-source-feedback .destination .box {
  animation: flash-stroke-width 2s linear infinite;
}

.dnd-target-feedback .destination .box {
  animation: flash-stroke-width 2s linear infinite;
}

// Composed Task DnD shape animation
.dnd-source-feedback .composed-task .border {
  animation: flash-stroke-width 2s linear infinite;
}

.dnd-target-feedback .composed-task .border {
  animation: flash-stroke-width 2s linear infinite;
}

// Ports DnD animation
.dnd-source-feedback.input-port {
  animation: flash-stroke-width 2s linear infinite;
}

.dnd-source-feedback.output-port {
  animation: flash-stroke-width 2s linear infinite;
}

.dnd-target-feedback.input-port {
  animation: flash-stroke-width 2s linear infinite;
}

.dnd-target-feedback.output-port {
  animation: flash-stroke-width 2s linear infinite;
}

// Links DnD feedback animation
.dnd-source-feedback .connection {
  animation: flash-stroke-width 2s linear infinite;
}

.dnd-target-feedback .connection {
  animation: flash-stroke-width 2s linear infinite;
}

.stream-deploying .box {
  animation: flash-stroke-width 2s linear infinite;
}

.instance-dot:hover {
  stroke-width: 3;
}

.joint-type-dataflow-instancedot.joint-element.deployed {
  stroke: $spring-green;
  fill: $flo-shape-fill-color;
}

.joint-type-dataflow-instancedot.joint-element {
  stroke: 'gray';
  fill: 'transparent';
}

table.zoom-canvas-control {
  tr {
    border: 0px;
  }
  tr:last-child {
    border: 0px;
  }
  td {
    border: 0px;
    padding: 0px;
  }
}

.dataflow-main-container .zoom-canvas-input {
  border: 0px;
  padding: 0px;
  font-size: 11px;
  background-color: transparent;
}

.tooltip {
  position: absolute;
}

.code-editor-host {
  height: 120px;
  width: 405px;
  border: 1px solid;
  border-color: $btn-default-border;
}

.connecting .flo-input-port {
  fill: $spring-green;
  r: 4;
}

.connecting .flo-output-port {
  fill: $spring-green;
  r: 4;
}

.connecting .label-group {
  display: block;
}

.label-group {
  display: none;
}

.flo-port {
  fill: rgb(24, 41, 50);
  stroke: white;
  stroke-width: 2px;
}

.validation-errors .flo-port {
  fill: #da0000;
}

.flo-port-inner-circle {
  fill: white;
  stroke: none;
}

.available-magnet .flo-port {
  stroke: none;
}

.flo-input-multiport {
  fill: #777777;
  stroke-width: 1px;
  stroke: #34302d;
}

.flo-output-multiport {
  fill: #777777;
  stroke-width: 1px;
  stroke: #34302d;
}

.flo-port-label {
  fill: black;
}

.flo-port-label-bg {
  fill: lightblue;
  stroke: lightblue;
  stroke-width: 7px;
}

.select-1, .select-2, .select-3, .select-4, .select-5, .select-6 {
  fill: #fff;
  opacity: 0;
  stroke: #222
}

.select-outline {
  opacity: 0;
  fill: rgb(208, 231, 255);
  stroke: rgb(208, 231, 255);
  stroke-width: 1px;
}

.joint-element.highlighted .box {
  stroke: #222;
  stroke-width: 1px;
  fill: #fff;
}

.joint-element.highlighted .select-1, .joint-element.highlighted .select-2, .joint-element.highlighted .select-3,
.joint-element.highlighted .select-4, .joint-element.highlighted .select-5, .joint-element.highlighted .select-6 {
  opacity: 1;
  stroke-width: 1px;
}

.joint-element.highlighted .select-outline {
  opacity: 1;
  fill: rgb(208, 231, 255);
  stroke: rgb(208, 231, 255);
  stroke-width: 10px;
}

.handle-label {
  fill: rgb(116, 116, 116);
  font-size: 12px;
  font-family: "Source Sans Pro", sans-serif;
  text-decoration: underline;
}

.handle-label:hover {
  font-weight: bolder;
}

// Error marker tooltip on the shape

.error-marker-tooltip .tooltip-inner {
  background-color: #da0000;
  max-width: 400px;
  //padding: 2px;
}

.tooltip.error-marker-tooltip .tooltip-arrow {
  border-top-color: #da0000;
}

.app-tooltip .tooltip-inner {
}

.marker-tooltip {

  list-style-type: none;
  margin: 0;
  padding: 0;

  li {
    border-bottom: 1px solid white;
    text-align: left;
  }

  li:last-child {
    border: none;
  }

}

.joint-type-palette-groupheader {
  cursor: pointer;
  .outer {
    fill: transparent;
  }
  .group-label-bg {
    fill: #da0000;
  }
  .group-label-bg.source {
    fill: $source-color;
  }
  .group-label-bg.processor {
    fill: $processor-color;
  }
  .group-label-bg.sink {
    fill: $sink-color;
  }
  .group-label-bg.other {
    fill: $other-color;
  }
  .group-label-bg.app {
    fill: $app-color;
  }
  .group-label-bg.task {
    fill: #FF5400;
  }
  .group-label-bg.control-nodes {
    fill: #FF5400;
  }
  .group-label {
    font-family: "Source Sans Pro", sans-serif;
    font-size: 12px;
    font-weight: normal;
    fill: white;
  }
  .group-line {
    stroke: #dfe5e8;
    stroke-width: 1px;
    stroke-linecap: round;
  }
}

.flo-handles {
  fill: $navy-6;
  font-size: 12px;
  font-family: "Source Sans Pro", sans-serif;
  display: none;
  .handle {
    cursor: pointer;
    text-decoration: underline;
    &:hover {
      fill: $blue-4;
    }
  }
  .handle-separator {
    fill: $navy-8;
  }
}

.joint-element.highlighted .flo-handles {
  display: block;
}




